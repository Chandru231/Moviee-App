import{r as a,j as e,L}from"./index-CJGLNV0y.js";import{M as E}from"./MovieList-D_9bRUUy.js";import{s as A,g as C,a as T}from"./api-BE1HzGRK.js";function P({onSearch:l}){const[s,c]=a.useState("");return a.useEffect(()=>{const o=setTimeout(()=>{l(s)},500);return()=>clearTimeout(o)},[s,l]),e.jsxs("div",{className:"relative max-w-xl mx-auto px-2 sm:px-0",children:[e.jsx("input",{type:"text",placeholder:"Search movies...",value:s,onChange:o=>c(o.target.value),className:"w-full px-4 py-2.5 md:py-3 pl-10 md:pl-12 rounded-full bg-white dark:bg-gray-800 text-gray-800 dark:text-white border border-gray-300 dark:border-gray-700 focus:border-blue-500 focus:outline-none transition-colors text-sm md:text-base"}),e.jsx("span",{className:"absolute left-4 sm:left-4 top-1/2 -translate-y-1/2 text-gray-400 text-sm md:text-base",children:"ðŸ”"}),s&&e.jsx("button",{onClick:()=>c(""),className:"absolute right-4 sm:right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-white text-sm md:text-base",children:"âœ•"})]})}const G=[{id:28,name:"Action"},{id:35,name:"Comedy"},{id:18,name:"Drama"},{id:27,name:"Horror"},{id:10749,name:"Romance"},{id:878,name:"Sci-Fi"},{id:53,name:"Thriller"},{id:16,name:"Animation"}],H=[{code:"",name:"All Languages"},{code:"ta",name:"Tamil"},{code:"te",name:"Telugu"},{code:"en",name:"English"},{code:"hi",name:"Hindi"},{code:"ml",name:"Malayalam"},{code:"kn",name:"Kannada"},{code:"ko",name:"Korean"},{code:"ja",name:"Japanese"}];function K(){const[l]=a.useState(()=>Math.floor(Math.random()*20)+1),[s,c]=a.useState([]),[o,h]=a.useState(!0),[x,p]=a.useState(null),[v,b]=a.useState(l),[j,w]=a.useState(!0),[r,k]=a.useState(""),[i,f]=a.useState(""),[d,y]=a.useState(""),m=a.useCallback(async(t,M=!1)=>{try{h(!0),p(null);let n;r?n=await A(r,t):d?n=await C(d,t):n=await T(t);let u=n.results;i&&(u=u.filter(g=>g.genre_ids.includes(Number(i)))),c(M?u:g=>[...g,...u]),w(t<n.total_pages)}catch(n){p("Something went wrong. Please try again."),console.error(n)}finally{h(!1)}},[r,i,d]);a.useEffect(()=>{const t=!r&&!d&&!i?l:1;b(t),m(t,!0)},[r,i,d,m,l]);const N=a.useCallback(t=>{k(t),f(""),y("")},[]);function S(){const t=v+1;b(t),m(t,!1)}return e.jsx("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-white",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4 md:py-8",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("img",{src:"/hero section.png",alt:"MovieApp Hero",className:"w-16 h-16 mx-auto mb-2"}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:r?`Results for "${r}"`:"Popular Movies"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center text-sm sm:text-base mb-6",children:"Experience world-class movies without boundaries."}),e.jsx("div",{className:"mb-4",children:e.jsx(P,{onSearch:N})}),!r&&e.jsx("div",{className:"mb-8 mx-auto w-full px-2 sm:px-0",style:{maxWidth:"600px"},children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 justify-center",children:[e.jsxs("div",{className:"relative w-full sm:flex-1",children:[e.jsx("span",{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-base sm:text-lg pointer-events-none",children:"ðŸŽ¬"}),e.jsxs("select",{value:i,onChange:t=>f(t.target.value),className:"w-full appearance-none bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-750 text-gray-800 dark:text-white pl-10 sm:pl-12 pr-8 sm:pr-10 py-3 sm:py-3.5 rounded-xl border-2 border-gray-200 dark:border-gray-600 text-sm font-medium shadow-lg hover:shadow-xl hover:border-blue-400 dark:hover:border-blue-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-300 cursor-pointer",style:{backgroundImage:"none"},children:[e.jsx("option",{value:"",children:"All Genres"}),G.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("span",{className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none text-sm",children:"â–¼"})]}),e.jsxs("div",{className:"relative w-full sm:flex-1",children:[e.jsx("span",{className:"absolute left-3 sm:left-4 top-1/2 transform -translate-y-1/2 text-base sm:text-lg pointer-events-none",children:"ðŸŒ"}),e.jsx("select",{value:d,onChange:t=>y(t.target.value),className:"w-full appearance-none bg-gradient-to-r from-gray-50 to-white dark:from-gray-800 dark:to-gray-750 text-gray-800 dark:text-white pl-10 sm:pl-12 pr-8 sm:pr-10 py-3 sm:py-3.5 rounded-xl border-2 border-gray-200 dark:border-gray-600 text-sm font-medium shadow-lg hover:shadow-xl hover:border-blue-400 dark:hover:border-blue-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 focus:outline-none transition-all duration-300 cursor-pointer",style:{backgroundImage:"none"},children:H.map(t=>e.jsx("option",{value:t.code,children:t.code===""?"All Languages":t.name},t.code))}),e.jsx("span",{className:"absolute right-3 sm:right-4 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none text-sm",children:"â–¼"})]})]})}),x&&e.jsxs("div",{className:"text-center py-10",children:[e.jsxs("p",{className:"text-red-500 mb-4",children:["âš ï¸ ",x]}),e.jsx("button",{onClick:()=>m(1,!0),className:"bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600",children:"Try Again"})]}),o&&s.length===0&&e.jsx(L,{}),!x&&e.jsx(E,{movies:s}),!o&&j&&s.length>0&&e.jsx("div",{className:"text-center mt-6 md:mt-8",children:e.jsx("button",{onClick:S,className:"bg-blue-500 text-white px-6 md:px-8 py-2 md:py-3 rounded-full font-semibold hover:bg-blue-600 transition-colors text-sm md:text-base",children:"Load More Movies"})}),o&&s.length>0&&e.jsx("div",{className:"text-center mt-6 md:mt-8",children:e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-gray-300 dark:border-gray-600 border-t-blue-500 rounded-full animate-spin"})})]})})}export{K as default};
